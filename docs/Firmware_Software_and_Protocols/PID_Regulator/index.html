<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Firmware_Software_and_Protocols/PID_Regulator" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.0">
<title data-rh="true">ПІД регулятор | Переклад FPV літератури від Victory Drones</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://smsnvc.github.io/public-fpv-manuals-ua/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://smsnvc.github.io/public-fpv-manuals-ua/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://smsnvc.github.io/public-fpv-manuals-ua/docs/Firmware_Software_and_Protocols/PID_Regulator"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="ПІД регулятор | Переклад FPV літератури від Victory Drones"><meta data-rh="true" name="description" content="Стисле посилання на цей переклад//bit.ly/PID-Regulator"><meta data-rh="true" property="og:description" content="Стисле посилання на цей переклад//bit.ly/PID-Regulator"><link data-rh="true" rel="icon" href="/public-fpv-manuals-ua/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://smsnvc.github.io/public-fpv-manuals-ua/docs/Firmware_Software_and_Protocols/PID_Regulator"><link data-rh="true" rel="alternate" href="https://smsnvc.github.io/public-fpv-manuals-ua/docs/Firmware_Software_and_Protocols/PID_Regulator" hreflang="en"><link data-rh="true" rel="alternate" href="https://smsnvc.github.io/public-fpv-manuals-ua/docs/Firmware_Software_and_Protocols/PID_Regulator" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Прошивки і протоколи","item":"https://smsnvc.github.io/public-fpv-manuals-ua/docs/category/прошивки-і-протоколи"},{"@type":"ListItem","position":2,"name":"ПІД регулятор","item":"https://smsnvc.github.io/public-fpv-manuals-ua/docs/Firmware_Software_and_Protocols/PID_Regulator"}]}</script><link rel="alternate" type="application/rss+xml" href="/public-fpv-manuals-ua/blog/rss.xml" title="Переклад FPV літератури від Victory Drones RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/public-fpv-manuals-ua/blog/atom.xml" title="Переклад FPV літератури від Victory Drones Atom Feed"><link rel="stylesheet" href="/public-fpv-manuals-ua/assets/css/styles.6b39c26e.css">
<script src="/public-fpv-manuals-ua/assets/js/runtime~main.b8430d83.js" defer="defer"></script>
<script src="/public-fpv-manuals-ua/assets/js/main.ebbefa81.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/public-fpv-manuals-ua/img/logo.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/public-fpv-manuals-ua/"><div class="navbar__logo"><img src="/public-fpv-manuals-ua/img/logo.png" alt="Логотип сайту" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/public-fpv-manuals-ua/img/logo.png" alt="Логотип сайту" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Переклад FPV літератури від Victory Drones</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/public-fpv-manuals-ua/docs/category/для-початківців">Статті та методички</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/public-fpv-manuals-ua/docs/category/для-початківців">Для початківців</a><button aria-label="Expand sidebar category &#x27;Для початківців&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/public-fpv-manuals-ua/docs/category/компоненти-дронів">Компоненти дронів</a><button aria-label="Expand sidebar category &#x27;Компоненти дронів&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/public-fpv-manuals-ua/docs/category/керування-і-відеозвязок">Керування і відеозв&#x27;язок</a><button aria-label="Expand sidebar category &#x27;Керування і відеозв&#x27;язок&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/public-fpv-manuals-ua/docs/category/інструменти-для-збірки-і-ремонтів">Інструменти для збірки і ремонтів</a><button aria-label="Expand sidebar category &#x27;Інструменти для збірки і ремонтів&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/public-fpv-manuals-ua/docs/category/прошивки-і-протоколи">Прошивки і протоколи</a><button aria-label="Collapse sidebar category &#x27;Прошивки і протоколи&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/public-fpv-manuals-ua/docs/Firmware_Software_and_Protocols/A_Complete_Guide_to_Flashing_and_Setting_Up_ExpressLRS">Прошивка і налаштування ExpressLRS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/public-fpv-manuals-ua/docs/Firmware_Software_and_Protocols/Firmware_for_FPV_Drone_Flight_Controller_Overview">Різновиди прошивок польотника</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/public-fpv-manuals-ua/docs/Firmware_Software_and_Protocols/How_to_Flash_ExpressLRS_Receivers_via_UART_using_FTDI_Dongle">Як відновити ExpressLRS Rx</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/public-fpv-manuals-ua/docs/Firmware_Software_and_Protocols/ExpressLRS_overview">Огляд ExpressLRS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/public-fpv-manuals-ua/docs/Firmware_Software_and_Protocols/How_to_Flash_Bluejay_Firmware_to_BLHeliS_ESC">Як прошити Bluejay?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/public-fpv-manuals-ua/docs/Firmware_Software_and_Protocols/ESC_Firmware_and_Protocols_Overview">Прошивки та протоколи ESC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/public-fpv-manuals-ua/docs/Firmware_Software_and_Protocols/FPV_Drone_PID_Explained">Принципи ПІД регулювання</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/public-fpv-manuals-ua/docs/Firmware_Software_and_Protocols/How_to_Setup_iNav">Як налаштувати INAV</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/public-fpv-manuals-ua/docs/Firmware_Software_and_Protocols/How_to_Backup_Flight_Controller_Using_STM32CubeProgrammer">Створення резервної копії в STM32CubeProgrammer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/public-fpv-manuals-ua/docs/Firmware_Software_and_Protocols/Best_AM32_ESC_Settings">Найкращі налаштування AM32</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/public-fpv-manuals-ua/docs/Firmware_Software_and_Protocols/How_to_Setup_TBS_Crossfire_and_Tracer_in_Betaflight">Як налаштувати Crossfire і Tracer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/public-fpv-manuals-ua/docs/Firmware_Software_and_Protocols/PID_Regulator">ПІД регулятор</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/public-fpv-manuals-ua/docs/Firmware_Software_and_Protocols/BLHeli32_Settings_for_Optimal_Performance">Налаштування BLHeli_32</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/public-fpv-manuals-ua/docs/Firmware_Software_and_Protocols/Setup_Failsafe_on_a_Mini_Quad">Як налаштувати Failsafe</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/public-fpv-manuals-ua/docs/Firmware_Software_and_Protocols/Whats_ExpressLRS_Gemini_How_to_Enable_it">Gemini в ExpressLRS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/public-fpv-manuals-ua/docs/Firmware_Software_and_Protocols/How_to_Flash_AM32">Як прошити AM32?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/public-fpv-manuals-ua/docs/Firmware_Software_and_Protocols/How_to_Set_Up_Optical_Flow_Rangefinder_Sensors">Налаштування датчика оптичного потоку</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/public-fpv-manuals-ua/docs/category/betaflight">Betaflight</a><button aria-label="Expand sidebar category &#x27;Betaflight&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/public-fpv-manuals-ua/docs/category/батареї-і-зарядки">Батареї і зарядки</a><button aria-label="Expand sidebar category &#x27;Батареї і зарядки&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/public-fpv-manuals-ua/docs/category/пульти-і-передавачі">Пульти і передавачі</a><button aria-label="Expand sidebar category &#x27;Пульти і передавачі&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/public-fpv-manuals-ua/docs/category/теми-для-просунутих">Теми для просунутих</a><button aria-label="Expand sidebar category &#x27;Теми для просунутих&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/public-fpv-manuals-ua/docs/intro">Розвиток компетенцій</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/public-fpv-manuals-ua/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/public-fpv-manuals-ua/docs/category/прошивки-і-протоколи"><span>Прошивки і протоколи</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">ПІД регулятор</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><p>Стисле посилання на цей переклад: <a href="https://bit.ly/PID-Regulator" target="_blank" rel="noopener noreferrer">https://bit.ly/PID-Regulator</a></p>
<table><thead><tr><th style="text-align:center">🫂</th><th style="text-align:left">Нижче вичитаний людьми машинний український переклад оригіналу. Для <a href="https://www.victory-drones.com/" target="_blank" rel="noopener noreferrer">VictoryDrones</a> переклад вичитали: Kristina.</th></tr></thead></table>
<header><h1><strong>ПІД РЕГУЛЯТОР</strong></h1></header>
<p><img decoding="async" loading="lazy" src="/public-fpv-manuals-ua/assets/images/PID_Regulator_image_1-19f934336ff15939e6c778434a309cca.png" width="624" height="156" class="img_ev3q"></p>
<p>ПІД регулятор – один із найпоширеніших автоматичних регуляторів. Він настільки універсальний, що застосовується практично скрізь, де потрібне автоматичне керування. Наприклад, температурою: спеціальні печі, холодильники, інкубатори, паяльники, сопло та стіл 3D-принтера, ІЧ паяльні станції та інше. Підтримка частоти обертів двигуна – наприклад, для верстатів. Різноманітні балансувальні штуки, гіроскутери, сігвеї, магнітні платформи, що левітують, і, звісно ж, квадрокоптери та літаки з автопілотом. Це все ПІД регулятор. Чому саме ПІД? Існують і інші регулятори, що перевершують ПІД за адаптивністю до керованої системи і стабільністю – наприклад, лінійно квадратичний. Але, щоб грамотно синтезувати такий регулятор, мати розуму більш, ніж &quot;понад голову&quot;, а налаштування ПІД регулятора – справа хоч і неприємна, але фактично дуже проста і під силу будь-кому, а сам ПІД регулятор універсальний для майже будь-якого процесу.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="зміст">Зміст<a href="#зміст" class="hash-link" aria-label="Direct link to Зміст" title="Direct link to Зміст">​</a></h2>
<p><a href="#%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0-%D1%83%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D1%96%D0%BD%D0%BD%D1%8F">Система управління</a></p>
<p><a href="#%D0%BF%D1%96%D0%B4-%D0%BA%D0%B0%D0%BF%D0%BE%D1%82%D0%BE%D0%BC-%D1%83-%D0%BF%D1%96%D0%B4-%D1%80%D0%B5%D0%B3%D1%83%D0%BB%D1%8F%D1%82%D0%BE%D1%80%D0%B0">Під капотом у ПІД регулятора</a></p>
<p><a href="#p-%D1%81%D0%BA%D0%BB%D0%B0%D0%B4%D0%BE%D0%B2%D0%B0">P складова</a></p>
<p><a href="#i-%D1%81%D0%BA%D0%BB%D0%B0%D0%B4%D0%BE%D0%B2%D0%B0">I складова</a></p>
<p><a href="#d-%D1%81%D0%BA%D0%BB%D0%B0%D0%B4%D0%BE%D0%B2%D0%B0">D складова</a></p>
<p><a href="#%D0%BD%D0%B0%D0%BB%D0%B0%D1%88%D1%82%D1%83%D0%B2%D0%B0%D0%BD%D0%BD%D1%8F-%D1%80%D0%B5%D0%B3%D1%83%D0%BB%D1%8F%D1%82%D0%BE%D1%80%D0%B0">Налаштування регулятора</a></p>
<p><a href="#%D1%80%D0%B5%D0%B0%D0%BB%D1%96%D0%B7%D0%B0%D1%86%D1%96%D1%8F-%D0%BD%D0%B0-c++">Реалізація на C++</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="система-управління">Система управління<a href="#система-управління" class="hash-link" aria-label="Direct link to Система управління" title="Direct link to Система управління">​</a></h2>
<hr>
<p>Перш ніж переходити безпосередньо до ПІДу, дуже важливо зрозуміти і запам&#x27;ятати кілька базових понять, із яких складається автоматична система. Насамперед це <strong>регулятор</strong>, який усім заправляє та знаходиться в центрі системи. Регулятор у цьому розумінні – математичний алгоритм чи частина програми, що крутиться на мікроконтролері. Регулятор, як алгоритм, працює із звичайними числами. <strong>Об&#x27;єкт управління</strong> – це пристрій, яким ми керуємо – наприклад, піч або двигун. Для цього у нас є <strong>керуючий пристрій</strong> – наприклад, димований тен або драйвер двигуна <em>[прим. пер.: ESC, електронний регулятор швидкості у квадрокоптерах]</em>. Керуючий пристрій отримує від регулятора <strong>керуючий сигнал</strong>, тобто конкретне число. Це може бути заповнення шім-сигналу - ширина імпульсу, від 0 до 255, а може бути кут повороту сервомашинки від 0 до 180, тому що регулятору байдуже чим керувати. В об&#x27;єкті управління у нас стоїть датчик, з якого регулятор отримує керовану величину, тобто поточний сигнал із датчика. Це – <strong>зворотний зв&#x27;язок</strong>, який дає можливість системі точно підтримати задане значення. У випадку з піччю це температура, а з мотором – частота обертів <em>[прим. пер.:  у випадку з квадрокоптером, дані для зворотнього зв’язку - з гіроскопа]</em>. Ну і нарешті регулятор отримує <strong>задане значення</strong>, тобто число, до якого він повинен привести поточне значення з датчика зворотнього зв’язку. Задане значення можна задавати як завгодно: крутилкою, повзунком, енкодером, кнопками, та хоч смс-кою або голосовим введенням <em>[прим. пер.:  у випадку з квадрокоптером, задане значення ви вводите рухаючи стіками на пульті]</em>. Регулятору це не важливо, для нього це просто цифра. Завдання регулятора полягає в тому, щоб порівнювати поточне значення з заданим і видавати керуючий сигнал на керуючий пристрій. Тобто в програмі це буде виглядати умовно так: регулятор отримав установку, регулятор отримав значення з датчика, регулятор виконав обчислення і видав нам керуючий сигнал – знову ж таки число. Якщо це шім – ми його подаємо через функцію генерації шім. Є ще один момент – регулятор повинен робити розрахунки і застосовувати керуючий сигнал через рівні проміжки часу, тобто з рівним періодом або частотою <em>[прим. пер.: звідси частота циклу ПІД, або англійською PID loop]</em>. Ця частота називається частотою дискретизації системи, а період позначається як dt, як період інтегрування <em>[прим. пер.: у випадку з квадрокоптером, гіроскоп може видавати свої дані частіше за цикл ПІД, і отут дійсно є інтегрування, накопичення чи усереднення показів]</em>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="під-капотом-у-під-регулятора">Під капотом у ПІД регулятора<a href="#під-капотом-у-під-регулятора" class="hash-link" aria-label="Direct link to Під капотом у ПІД регулятора" title="Direct link to Під капотом у ПІД регулятора">​</a></h2>
<hr>
<p>ПІД регулятор складається з трьох складових: пропорційної <strong>P</strong>, інтегральної <strong>I</strong> та диференційної <strong>D</strong>, формується просто як сума трьох значень, помножених кожна на свій коефіцієнт. Ця сума після обчислень стає керуючим сигналом, який подається на керуючий пристрій, позначимо його як <strong>out</strong>.</p>
<p>Out = P*kP + I*kI + D*kD</p>
<p><strong>kP</strong>, <strong>kI</strong> і <strong>кD</strong> – це і є ті коефіцієнти, які потрібно налаштувати для роботи ПІДа. Значення тут можуть бути найрізноманітніші, від 0.001 то десятків і тисяч, це залежить від конкретної системи. Тут є ще один момент: будь-який коефіцієнт може дорівнювати нулю, і в такому випадку обнулюється вся його компонента. Тобто регулятор можна перетворити на П, ПІ, ПД, та інші поєднання. Різні системи вимагають різного підходу, саме тому ПІД регулятор такий універсальний. Надалі будемо користуватися такими назвами змінних:</p>
<ul>
<li><strong>out</strong> – вихід з регулятора (керуючий сигнал)</li>
<li><strong>setpoint</strong> – задане значення</li>
<li><strong>input</strong> – вхід (значення з датчика)</li>
<li><strong>err</strong> – помилка регулювання</li>
<li><strong>dt</strong> – період обчислення та регулювання</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="p-складова">P складова<a href="#p-складова" class="hash-link" aria-label="Direct link to P складова" title="Direct link to P складова">​</a></h3>
<hr>
<p>Пропорційна складова є різницею поточного значення з датчика та установки.</p>
<p>P = задане значення - вхід</p>
<p>Ця різниця називається помилкою регулювання, тобто наскільки далеко перебуває система від заданого значення. Тобто що більша помилка, то більшим буде керуючий сигнал і тим швидше система приводитиме керовану величину до заданого значення. Коефіцієнт kP тут відіграє роль ніби “посилення помилки” <em>[прим. пер.: тому що ми множимо kP на величину помилки - ніби посилюємо, але ж це залежить від значення коефіцієнта, і сама суть регулювання - зменшити помилку, а не збільшити]</em> та налаштовується вручну. Але водночас, якщо система прийшла до заданого значення, якщо нам супер-повезло і помилка стане дорівнювати нулю, то і керуючий сигнал теж! Іншими словами, регулятор ніколи не зможе привести до заданого значення, завжди буде якась помилка. П складова є основною в ПІД регуляторі і, так би мовити, тягне найбільшу лямку, регулятор може непогано працювати тільки на ній одній. P складова виправляє помилку в поточний момент часу.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="i-складова">I складова<a href="#i-складова" class="hash-link" aria-label="Direct link to I складова" title="Direct link to I складова">​</a></h3>
<hr>
<p>Інтегральна складова просто підсумовує в саму себе ту саму помилку, різницю поточного та заданого значення, помножену на період дискретизації системи <em>[прим. пер.: в квадрокоптерах - період ПІД-циклу, у умовного гіроскопа може бути свій цикл зі своєю дискретизацією - зазвичай там більша частота]</em>, тобто на час, що минув від попереднього розрахунку <strong>dt</strong> – фактично бере інтеграл від помилки за часом.</p>
<p>I = I + (setpoint - input) * dt</p>
<p>У самому регуляторі це ще множиться на коефіцієнт kI, яким налаштовується різкість впливу цієї складової. В інтегральній складовій буквально накопичується помилка, що дозволяє регулятору з часом повністю її усунути, тобто привести систему до заданого значення з максимальною точністю. І складова виправляє минулі помилки, що накопичилися.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="d-складова">D складова<a href="#d-складова" class="hash-link" aria-label="Direct link to D складова" title="Direct link to D складова">​</a></h3>
<hr>
<p>Диференціальна складова являє собою різницю поточної та попередньої помилки, поділену на час між вимірюваннями, тобто на ту ж dt, яка є загальним періодом регулятора. Іншими словами – це похідна від помилки за часом.</p>
<p>err = setpoint - input</p>
<p>D = (err - prevErr) / dt</p>
<p>prevErr = err</p>
<p>Фактично D складова реагує на зміну сигналу з датчика, і що сильніше відбувається ця зміна, то більше значення додається до загальної суми. Іншими словами, D дозволяє компенсувати різкі зміни в системі і, за правильного налаштування, запобігти сильному перерегулюванню та зменшити розгойдування. Коефіцієнт D дозволяє налаштувати вагу, або різкість даної компенсації, так само як інші коефіцієнти регулюють свої складові. D складова насамперед потрібна для швидких систем, тобто для систем із різкими змінами, як-от квадрокоптер або шпиндель верстата під змінним навантаженням. D складова виправляє можливі майбутні помилки, аналізуючи швидкість збільшення (або зменшення) помилки в сусідніх циклах ПІД.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="налаштування-регулятора">Налаштування регулятора<a href="#налаштування-регулятора" class="hash-link" aria-label="Direct link to Налаштування регулятора" title="Direct link to Налаштування регулятора">​</a></h2>
<hr>
<p>Для налаштування регулятора потрібно варіювати коефіцієнти:</p>
<ul>
<li>При збільшенні <strong>kP</strong> збільшується швидкість виходу на задане значення, збільшується керуючий сигнал. Чисто математично система не може прийти рівно до заданого значення, оскільки при наближенні до установки П складова пропорційно зменшується. При подальшому збільшенні kP реальна система втрачає стійкість, і починаються коливання.</li>
<li>При збільшенні <strong>kI</strong> зростає швидкість компенсації помилки, що дозволяє з часом вивести систему точно до заданого значення. Якщо система повільна, а kI занадто великий – інтегральна сума сильно зросте і відбудеться перерегулювання, яке може мати характер незгасаючих коливань із великим періодом. Тому інтегральну суму в алгоритмі регулятора часто обмежують, щоб вона не могла збільшуватись і зменшуватись до нескінченності.</li>
<li>При збільшенні <strong>кD</strong> зростає стабільність системи, вона не дає системі змінюватися дуже швидко <em>[прим. пер.: кажуть, що Д-коефіцієнт демпфує або гальмує реакцію системи - але це ціна стабільності, відсутності коливань]</em>. У той же час kD може стати причиною неадекватної поведінки системи та постійних стрибків керуючого сигналу, якщо значення з датчика <strong>шумить</strong> <em>[прим. пер.: тому в Betaflight є фільтрація для даних гіроскопа, динамічний Д-коефіцієнт і багато різних цікавих налаштувань]</em>. На кожну різку зміну сигналу з датчика Д складова буде реагувати зміною керуючого сигналу, тому сигнал з датчика потрібно фільтрувати (читай посібник <a href="https://alexgyver.ru/lessons/filters/" target="_blank" rel="noopener noreferrer">з фільтрів</a>).</li>
</ul>
<p>Ось так виглядає процес стабілізації при зміні коефіцієнтів:<img decoding="async" loading="lazy" src="data:image/png;base64,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" width="400" height="300" class="img_ev3q"></p>
<p>Налаштування регулятора – справа не дуже проста. Початкові коефіцієнти для підбору можна отримати за наступним алгоритмом: спочатку виставляємо всі коефіцієнти в <strong>0</strong>. Плавно збільшуємо <strong>kP</strong> до появи <em>незгасаючих коливань</em>. Значення kP, за якого вони з&#x27;явилися, запишемо та позначимо як <strong>kP1</strong>. Далі вимірюємо період коливань системи в секундах, позначимо як <strong>Т</strong>. Підсумкові коефіцієнти отримаємо так:</p>
<ul>
<li>kP = 0,6 * kP1</li>
<li>kI = kP / T * 2 * dt</li>
<li>kD = kP * T / 8 / dt</li>
</ul>
<p>Наприклад, незатухаючі коливання з&#x27;явилися за kP 20, період коливань склав 3 секунди. Період dt у системі буде 50 мс (0,05 с). Рахуємо:</p>
<ul>
<li>kP: 0,6*20=12</li>
<li>kI: 12/3*2*0,05=0,4</li>
<li>kD: 12*2/8/0,05=60</li>
</ul>
<p>На отриманих коефіцієнтах мають більш-менш працювати більшість систем, але не всі. Також можна скористатись автоматичним тюнером коефіцієнтів – наприклад, два різних алгоритми вбудовані в бібліотеку <a href="https://alexgyver.ru/gyverpid/" target="_blank" rel="noopener noreferrer">GyverPID</a>.</p>
<h2></h2>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="реалізація-на-c++">Реалізація на C++<a href="#реалізація-на-c++" class="hash-link" aria-label="Direct link to Реалізація на C++" title="Direct link to Реалізація на C++">​</a></h2>
<hr>
<p>Поєднуючи всі розглянуті вище рівняння, отримаємо:
// (вхід - дані зворотнього зв’язку, задане значення, п, і, д, період у секундах, мін.вихід, макс. вихід)</p>
<p>int computePID(float input, float setpoint, float kp, float ki, float kd, float dt, int minOut, int maxOut) {</p>
<p>float err = setpoint - input;</p>
<p>static float integral = 0, prevErr = 0;</p>
<p>integral = constrain(integral + (float)err * dt * ki, minOut, maxOut);</p>
<p>float D = (err - prevErr) / dt;</p>
<p>prevErr = err;</p>
<p>return constrain(err * kp + integral + D * kd, minOut, maxOut);</p>
<p>}</p>
<p>Це готова функція, яка приймає значення з датчика, задане значення, три коефіцієнти і час, а також обмеження виходу з регулятора. Як користуватись цією функцією: функція має викликатися з деяким періодом, причому тривалість цього періоду потрібно буде передати у функцію в секундах. Якщо простіше, можна використати затримку. Але робити так не рекомендується, краще зробити таймер на millis (мілісекунди) і працювати з ним. Функція повертає керуючий сигнал, тобто можна подати його, наприклад, як ШІМ. Період dt має такий сенс: що інерційніша у нас система, то рідше можна обчислювати ПІД. Наприклад, для обігріву кімнати період можна поставити 1 секунду або більше, а для контролю за оборотами двигуна треба буде поставити кілька десятків мілісекунд, тобто близько сотні разів на секунду.</p>
<p><strong>ВІДЕО</strong>: <a href="https://www.youtube.com/watch?v=rIbWnB26dp0" target="_blank" rel="noopener noreferrer">https://www.youtube.com/watch?v=rIbWnB26dp0</a></p>
<p><em><strong>КОМЕНТАРІ</strong></em></p>
<ol>
<li>А хіба змінні integral і prevErr у тому вигляді, як вони використовуються у функції, не обнуляються щоразу при її виклику? Якщо так, то втрачає сенс вираз</li>
</ol>
<p>integral = constrain(integral + (float)err * dt * ki, minOut, maxOut);<br>
<!-- -->float D = (err – prevErr) / dt;<br>
<!-- -->prevErr = err;</p>
<p>Бо ці змінні нульові. Чи я щось не так зрозумів?</p>
<ul>
<li>Ці змінні зазначені як статичні. Це означає, що при наступному запуску функції в цій змінній буде зберігатися значення з розрахунків попереднього запуску функції зміни цього параметру</li>
</ul>
<ol start="2">
<li>“Фактично D складова реагує <strong>на зміну сигналу</strong> з датчика”. Потрібно виправити частину цієї фрази на: “Фактично D складова реагує <strong>на зміну швидкості зміни сигналу</strong> з датчика”. Або іншими словами “на <strong>прискорення</strong> зміни сигналу”.</li>
</ol>
<ul>
<li>ні, не треба, там немає прискорення. Зміна рахується за dt, це швидкість. У прикладі вище ми шукаємо швидкість помилки, але якщо зробити нескладні перетворення: (err – prevErr) / dt == (setpoint – input – (setpoint – previnput)) / dt == (previnput – input) / dt, то вийде швидкість зміни сигналу з датчика</li>
</ul>
<p>3. У розрахунках використовується оператор ділення, а отже результат функції Float. Далі в тексті не особливо приділено увагу dt – начебто і написано, що час у секундах, але в реаліях найчастіше подібний регулятор запускається з часом ітерації всієї програми менше секунди, а значить dt менше одиниці при переведенні в секунди, що сильно позначиться в розрахунках D. Дуже хотів би що б ти пояснив, як бути з варіантом dt, наприклад, на lineFollow (Рух по лінії), коли програма повинна оперативно реагувати на зміни датчиків (8 штук).</p>
<ul>
<li>такий підхід годиться для повільних систем, коли є час подумати і немає чіткого зв&#x27;язку між виміряним значенням і результуючим впливом. Для швидких систем такий підхід не годиться. І нема чого туди мілі- та мікросекунди підставляти. Якщо треба швидко, то потрібен табличний або через функцію перерозрахунок вимірювань і випливів. І замість вплив = ПІД має стати вплив = задане значення + ПІД  (вони всі мають бути в одних і тих одиницях!). Інакше чекатимеш, поки “перекачає” задане значення в інтегральну складову. Як варіант, для швидких систем при зміні значення одразу завантажувати його в інтеграл і обнуляти попередню та поточну помилки. Kp, Ki, Kd тоді зовсім інші значення будуть. Воно вже тоді буде не шукати баланс між входом і виходом, а корегувати базове значення, враховуючи “несподівані” фактори. Це якщо звичайний пропорційний перерахунок не впорається, типу вплив = задане * задане / виміряне (ділити/множити залежно від залежностей)</li>
</ul>
<p>4. Не зовсім розумію, як застосувати у реальних умовах твій АВТО-обчислювач коефіцієнтів. Є датчик температури, ШІМ-тени. Як за допомогою тюнера (1 чи 2) налаштувати регулятор для реальної системи?<br>
<!-- -->- Завантажити приклад, відкрити графік або лог, чекати. Якщо буде поводитись інакше – покрутити коефіцієнти тюнера. На виході тюнер видасть 3 коефіцієнти</p>
<p>5. Помилка у статті: &quot;kD: 12 * 2/8/0.05 = 60&quot;.<br>
<!-- -->Якщо період=3сек, а kD=kP*T/8/dt, то kD: 12*3/8/0.05=90</p>
<p>6. А як бути, коли залежність між регулюванням та метою зворотна? Тобто, наприклад, температура та швидкість обертання вентилятора?</p>
<ul>
<li>Залежить від діапазону. Якщо 0-255, то:<br>
<!-- -->1) Out=255-Out;<br>
<!-- -->або<br>
<!-- -->2) Out=map(Out, 0, 255, 255, 0);<br>
<!-- -->Але перший варіант буде працювати швидше</li>
</ul>
<p>7. На якому рівні треба обмежувати integral? Припустимо, датчик температури отримує значення шім 255 максимум. integral = maxOut = 255?</p>
<ul>
<li>В найпростішому вигляді – так, як зроблено тут. Тобто за рівнями макс і мін результуючого впливу. А взагалі – це сфера закритих алгоритмів, які виробники зберігають за сімома замками</li>
</ul>
<p>8. Питання до теоретиків: Якщо зробити dt плаваючу, тобто запам&#x27;ятовуємо попереднє значення системного таймера, віднімаємо його від поточного і отримуємо dt? При цьому dt максимально маленьке, а якщо основна програма не передбачає складних розгалужень, що значно впливають на тривалість циклу, то dt ще й не таке вже й плаваюче, щоб призводити до &quot;розвалювання&quot; регулятора.</p>
<ul>
<li>Інтегральна складова буде частіше підсумовувати, але кількісно меншу вагу. А диференціальна максимально швидко відреагує на зміну вектору швидкості. Це може знадобитись, якщо важлива швидка реакція на зміни, в межах десятих або навіть сотих долей секунди, якщо процесор у вас якийсь esp32 на 200 МГц. Поставте ОС реального часу на звичайний комп&#x27;ютер. Там вам і частоти вище, плюс багатоядерність, тільки в цьому алгоритмі нема чого на окремі потоки розносити, він надто короткий</li>
</ul>
<p>9. Підкажіть, будь ласка, що таке “період <strong>dt</strong>”</p>
<ul>
<li>інтервал, через який регулятор буде обчислювати значення результату, тобто вираховувати результат. Наприклад, dt 100 мс - кожні 100 мс регулятор буде рахувати нове значення</li>
</ul>
<p>Знаєте хлопці, я не знаю що зі мною не так, але я юзав три бібліотеки з ПІД регуляторами, загалом витратив напевно більше місяця на експерименти з регуляторами, і так і не зміг налаштувати ПІД регулятор на нормальну роботу (правда, цю статтю я не знаходив і не читав), при kp менше 500 він взагалі не заводиться, хрін його знає, намучився, коротше я плюнув і написав свій регулятор, у якого всього два параметри (газ, гальмо), і третій штовхати нема куди, але працює ідеально, як повинен працювати налаштований під регулятор. Реально чітко працює. Налаштовується елементарно, просто та інтуїтивно зрозуміло. Параметри взаємно протилежні. І якщо щось не так, потрібно просто додати один або забрати інший. Все просто, жодних формул не треба.<br>
<!-- -->- Схоже на те, що у вас вийшов просто П-регулятор</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/smsnvc/fpv-manuals-ua/blob/master/docs/04_Firmware_Software_and_Protocols/PID_Regulator.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/public-fpv-manuals-ua/docs/Firmware_Software_and_Protocols/How_to_Setup_TBS_Crossfire_and_Tracer_in_Betaflight"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Як налаштувати Crossfire і Tracer</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/public-fpv-manuals-ua/docs/Firmware_Software_and_Protocols/BLHeli32_Settings_for_Optimal_Performance"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Налаштування BLHeli_32</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#зміст" class="table-of-contents__link toc-highlight">Зміст</a></li><li><a href="#система-управління" class="table-of-contents__link toc-highlight">Система управління</a></li><li><a href="#під-капотом-у-під-регулятора" class="table-of-contents__link toc-highlight">Під капотом у ПІД регулятора</a><ul><li><a href="#p-складова" class="table-of-contents__link toc-highlight">P складова</a></li><li><a href="#i-складова" class="table-of-contents__link toc-highlight">I складова</a></li><li><a href="#d-складова" class="table-of-contents__link toc-highlight">D складова</a></li></ul></li><li><a href="#налаштування-регулятора" class="table-of-contents__link toc-highlight">Налаштування регулятора</a></li><li><a href="#реалізація-на-c++" class="table-of-contents__link toc-highlight">Реалізація на C++</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Про проєкт</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/public-fpv-manuals-ua/docs/intro">Вступне слово</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Соцмережі</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.facebook.com/victorydrones.ua/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.victory-drones.com/discord" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.instagram.com/victory_drones/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Instagram<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/@victorydrones" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://whatsapp.com/channel/0029VaG49ecGufIxG1CL1C14" target="_blank" rel="noopener noreferrer" class="footer__link-item">WhatsApp<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://x.com/VictoryDrones" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Додаткові ресурси</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/public-fpv-manuals-ua/blog">Блог перекладачів</a></li><li class="footer__item"><a href="https://dignitas.fund/uk/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Фонд Dignitas<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Сайт зроблено в рамках проєкту Victory Drones. 2025.</div></div></div></footer></div>
</body>
</html>